# PowerSimData
This package enables communication with the server to carry out power-flow study
in the U.S. electrical grid. State pattern is used to alter the behavior of the
 *Scenario* object when its internal state changes. The following state have
 been implemented so far:
* **create**;
* **execute**;
* **analyze**;
* **delete**.

When a *Scenario* object is created, its state will be set either to **create**,
**execute** or **analyze**. This is handled in the constructor of the *Scenario*
class. To instantiate a *Scenario* object, only one argument, the `descriptor`
(type `str`) is needed. The `descriptor` can either be the scenario id or the
scenario name. An empty `str` will set the *Scenario* in the **create** state.
If a scenario id or name is used then the **analyze** state is activated if the
simulation has been successfully ran and the output data have been extracted.
Otherwise the state will be set to **execute**.

Once the scenario is created, the internal state of the *Scenario* object will
automatically change to **execute**. The later state does the heavy lifting: i)
it prepares the simulation inputs, ii) launches the simulation and iii) converts
the MATLAB binaries output files generated by the simulation to data frames
saved in Python pickle file. When this is done, the user can activate the
**analyze** state an download input -- the grid and various profiles used in
the simulation -- and output data -- the power produced by generators and
flowing in the branches of the network. The **delete** state is only accessible
from the **analyze** state and lets the user delete the current scenario, i.e.,
input and out output data as well as all references to the scenario in master
files.



# 1. *Scenario* Object
This section illustrates the functionalities of the *Scenario* object.


### A. Analyzing Scenario
The following code snippets shows how one can access scenario information and
data using the *Scenario* object. 
```python
from powersimdata.scenario.scenario import Scenario

scenario = Scenario('0')
print(scenario.state.name)  # print internal state of Scenario object

scenario.state.print_scenario_info()  # print scenario information
scenario.state.print_infeasibilities()  # print eventual infeasibilities

ct = scenario.state.get_ct  # get change table
grid = scenario.state.get_grid()  # get grid

demand = scenario.state.get_demand()  # get demand profile
hydro = scenario.state.get_hydro()  # get hydro profile
solar = scenario.state.get_solar()  # get solar profile
wind = scenario.state.get_wind()  # get wind profile

pg = scenario.state.get_pg()  # get PG profile
pf = scenario.state.get_pf()  # get PF profile
```
If the capacity of some generators, branches or DC line have been increased
and/or the demand in one or multiple load zones has been scaled for this scenario
then the change table will enclose these changes and the retrieved grid and
input profiles will be modified accordingly.



### B. Creating Scenario